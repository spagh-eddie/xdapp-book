<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Relayers - Wormhole Development Book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../introduction/introduction.html">Introduction</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Overview</li><li class="chapter-item expanded "><a href="../../dapps/0_xdappOverview.html"><strong aria-hidden="true">1.</strong> xDapps</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dapps/1_defiBasics.html"><strong aria-hidden="true">1.1.</strong> Ecosystem Basics</a></li><li class="chapter-item expanded "><a href="../../dapps/2_crossChainInteroperability.html"><strong aria-hidden="true">1.2.</strong> Blockchain Interoperability</a></li><li class="chapter-item expanded "><a href="../../dapps/3_xdataxassets.html"><strong aria-hidden="true">1.3.</strong> xData &amp; xAssets</a></li><li class="chapter-item expanded "><a href="../../dapps/4_whatIsanXdapp.html"><strong aria-hidden="true">1.4.</strong> What is an xDapp?</a></li><li class="chapter-item expanded "><a href="../../dapps/5_advantages.html"><strong aria-hidden="true">1.5.</strong> Advantages of xDapps</a></li></ol></li><li class="chapter-item expanded "><a href="../../wormhole/0_wormholeOverview.html"><strong aria-hidden="true">2.</strong> Wormhole</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../wormhole/1_whatIsWormhole.html"><strong aria-hidden="true">2.1.</strong> What is Wormhole?</a></li><li class="chapter-item expanded "><a href="../../wormhole/2_architectureOverview.html"><strong aria-hidden="true">2.2.</strong> Architecture Overview</a></li><li class="chapter-item expanded "><a href="../../wormhole/3_coreLayerContracts.html"><strong aria-hidden="true">2.3.</strong> Core Layer Contracts</a></li><li class="chapter-item expanded "><a href="../../wormhole/4_vaa.html"><strong aria-hidden="true">2.4.</strong> VAA: Verified Action Approval</a></li><li class="chapter-item expanded "><a href="../../wormhole/5_guardianNetwork.html"><strong aria-hidden="true">2.5.</strong> Guardian Network</a></li><li class="chapter-item expanded "><a href="../../wormhole/6_relayers.html"><strong aria-hidden="true">2.6.</strong> Relayers</a></li><li class="chapter-item expanded "><a href="../../wormhole/7_xAssetBridge.html"><strong aria-hidden="true">2.7.</strong> xAsset Bridge</a></li><li class="chapter-item expanded "><a href="../../wormhole/8_wormchain.html"><strong aria-hidden="true">2.8.</strong> Wormchain</a></li></ol></li><li class="chapter-item expanded "><a href="../../dapps/architecture/0_dappDesign.html"><strong aria-hidden="true">3.</strong> xDapp Design</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../dapps/architecture/1_keyConsiderations.html"><strong aria-hidden="true">3.1.</strong> Key Considerations</a></li><li class="chapter-item expanded "><a href="../../dapps/architecture/2_ecosystems.html"><strong aria-hidden="true">3.2.</strong> Ecosystems</a></li><li class="chapter-item expanded "><a href="../../dapps/architecture/3_protocolDesign.html"><strong aria-hidden="true">3.3.</strong> Protocol Design</a></li><li class="chapter-item expanded "><a href="../../dapps/architecture/4_topology.html"><strong aria-hidden="true">3.4.</strong> Topology</a></li><li class="chapter-item expanded "><a href="../../dapps/architecture/5_relayers.html" class="active"><strong aria-hidden="true">3.5.</strong> Relayers</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">Developing xDapps</li><li class="chapter-item expanded "><a href="../../technical/env/environments.html"><strong aria-hidden="true">4.</strong> Environment Setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../technical/env/tilt.html"><strong aria-hidden="true">4.1.</strong> Tilt (Devnet)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../technical/env/troubleshooting.html"><strong aria-hidden="true">4.1.1.</strong> Troubleshooting</a></li></ol></li><li class="chapter-item expanded "><a href="../../technical/env/wlv.html"><strong aria-hidden="true">4.2.</strong> Wormhole Local Validator</a></li><li class="chapter-item expanded "><a href="../../technical/env/testnet.html"><strong aria-hidden="true">4.3.</strong> Testnet</a></li><li class="chapter-item expanded "><a href="../../technical/env/tooling.html"><strong aria-hidden="true">4.4.</strong> Tooling</a></li></ol></li><li class="chapter-item expanded "><a href="../../technical/overview.html"><strong aria-hidden="true">5.</strong> Contract Development</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../technical/evm/overview.html"><strong aria-hidden="true">5.1.</strong> EVM</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../technical/evm/coreLayer.html"><strong aria-hidden="true">5.1.1.</strong> Core Layer</a></li><li class="chapter-item expanded "><a href="../../technical/evm/tokenLayer.html"><strong aria-hidden="true">5.1.2.</strong> Token Bridge Module</a></li><li class="chapter-item expanded "><a href="../../technical/evm/nftLayer.html"><strong aria-hidden="true">5.1.3.</strong> NFT Bridge Module</a></li><li class="chapter-item expanded "><a href="../../technical/evm/relayer.html"><strong aria-hidden="true">5.1.4.</strong> Relayer Module</a></li><li class="chapter-item expanded "><a href="../../technical/evm/bestPractices.html"><strong aria-hidden="true">5.1.5.</strong> Best Practices</a></li></ol></li><li class="chapter-item expanded "><a href="../../technical/solana/overview.html"><strong aria-hidden="true">5.2.</strong> Solana</a></li><li class="chapter-item expanded "><a href="../../technical/cosmos/overview.html"><strong aria-hidden="true">5.3.</strong> Cosmos</a></li><li class="chapter-item expanded "><a href="../../technical/algorand/overview.html"><strong aria-hidden="true">5.4.</strong> Algorand</a></li><li class="chapter-item expanded "><a href="../../technical/near/overview.html"><strong aria-hidden="true">5.5.</strong> Near</a></li><li class="chapter-item expanded "><a href="../../technical/aptos/overview.html"><strong aria-hidden="true">5.6.</strong> Aptos</a></li></ol></li><li class="chapter-item expanded "><a href="../../technical/relayer/overview.html"><strong aria-hidden="true">6.</strong> Relayers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../technical/relayer/genericRelayer.html"><strong aria-hidden="true">6.1.</strong> Generic Relayers</a></li><li class="chapter-item expanded "><a href="../../technical/relayer/specializedRelayers.html"><strong aria-hidden="true">6.2.</strong> Specialized Relayers</a></li></ol></li><li class="chapter-item expanded "><a href="../../technical/typescript/overview.html"><strong aria-hidden="true">7.</strong> Wormhole Typescript SDK</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../technical/typescript/attestingToken.html"><strong aria-hidden="true">7.1.</strong> Token Registration</a></li><li class="chapter-item expanded "><a href="../../technical/typescript/tokenTransfer.html"><strong aria-hidden="true">7.2.</strong> Token Transfer Basics</a></li><li class="chapter-item expanded "><a href="../../technical/typescript/cross-ecosystem-transfer.html"><strong aria-hidden="true">7.3.</strong> Cross-Ecosystem Transfer</a></li><li class="chapter-item expanded "><a href="../../technical/typescript/using-relayer.html"><strong aria-hidden="true">7.4.</strong> Using Relayers</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="../../reference/overview.html"><strong aria-hidden="true">8.</strong> Other Resources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/glossary.html"><strong aria-hidden="true">8.1.</strong> Glossary</a></li><li class="chapter-item expanded "><a href="../../reference/usefulLinks.html"><strong aria-hidden="true">8.2.</strong> Useful Links</a></li><li class="chapter-item expanded "><a href="../../reference/contracts.html"><strong aria-hidden="true">8.3.</strong> Deployed Contracts</a></li><li class="chapter-item expanded "><a href="../../reference/rpcnodes.html"><strong aria-hidden="true">8.4.</strong> RPC Nodes</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Wormhole Development Book</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/wormhole-foundation/xdapp-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="relayers"><a class="header" href="#relayers">Relayers</a></h1>
<p>In Chapter 2, we discussed the <a href="../../wormhole/6_relayers.html">general concepts associated with relayers in the Wormhole ecosystem</a>. In this section, we'll elaborate on the considerations that should be accounted for when using relayers in your xDapp.</p>
<h2 id="fundamentals"><a class="header" href="#fundamentals">Fundamentals</a></h2>
<p>It's important to remember that relayers are untrusted. This means you don't have to trust them--but it also means you can't trust them. This is true of both generic and specialized relayers.</p>
<p>Let's dive into a little more detail about why relayers are untrusted and what this means for you.</p>
<p>A few key properties of VAAs:</p>
<ul>
<li>They are publicly emitted from the Guardian Network.</li>
<li>They need to be signed by the Guardian Network to be considered authentic.</li>
<li>They can be verified as authentic by anyone and any Wormhole Core Contract.</li>
</ul>
<p>Relayers are untrusted as an inherent consequence of these properties. Anyone can pick up a VAA and deliver it anywhere, but no one can alter the content of the VAA without invalidating the signatures.</p>
<p>So, when writing your contracts, it's incredibly important to only trust information which is either inside your contract or inside a VAA. If you trust information provided by a relayer, you are opening yourself up to untrusted input attacks.</p>
<p>The easiest and most secure way to interact with relayers then is to only accept the VAA as input. If the relayer can't provide any additional args, then there's no way for them to provide untrusted input.</p>
<p>More advanced strategies involve having the relayer perform untrusted off-chain computation which is passed into the destination contract. These strategies can optimize gas costs, but can also create attack vectors if not used correctly.</p>
<p>With this in mind, relayer design becomes a matter of structuring the messages in your protocol such that there is a single, deterministic way that they can be processed. In a well designed protocol, relayers have a 'correct' implementation.</p>
<p>Relayers are conceptually quite similar to &quot;crank turner&quot; processes used elsewhere in blockchain, in that there is only a single action which can be taken (pulling the crank), and their sole responsibility is to initiate this action and pay for the costs.</p>
<hr />
<h2 id="generic-relayers"><a class="header" href="#generic-relayers">Generic Relayers</a></h2>
<p>Generic relayers are a decentralized relayer network which can deliver arbitrary VAAs as long as the recipient contract conforms with the generic relayer API.</p>
<p><strong><em>Advantages:</em></strong></p>
<ul>
<li>Generic relayers are done purely on-chain, so there's no need to develop, host or maintain relayers.</li>
</ul>
<p><strong><em>Disadvantages:</em></strong></p>
<ul>
<li>There's less room for optimization via features like conditional delivery, batching, off-chain calculations, etc.</li>
</ul>
<hr />
<h2 id="specialized-relayers"><a class="header" href="#specialized-relayers">Specialized Relayers</a></h2>
<p>Specialized Relayers are relayers that are purpose-built to relay messages for a certain application. In the future, there may be ways to customize generic relayers such that they will gain the advantages of today's specialized relayers.</p>
<p><strong><em>Advantages:</em></strong></p>
<ul>
<li>Specialized relayers can perform off-chain untrusted computation.</li>
<li>They are highly customizeable and can perform batching, conditional delivery, multi-chain deliveries, etc.</li>
<li>Can home-roll an incentive structure.</li>
</ul>
<p><strong><em>Disadvantages</em></strong></p>
<ul>
<li>Requires development work and relayer hosting.</li>
</ul>
<hr />
<h3 id="relayer-incentives"><a class="header" href="#relayer-incentives">Relayer Incentives</a></h3>
<p>Relayers have to cover the costs of executing the downstream transactions resulting from the original 'source' transaction. Unless the relayers are running at a loss, there must be a mechanism for reimbursing the relayer in exchange for message delivery.</p>
<p>There are many strategies for reimbursement, and the 'best' strategy for an application is often dependent on the specifics of that application. However, a few of the most common strategies are:</p>
<ul>
<li>Pay the relayer with a potion of the tokens being sent cross-chain.</li>
<li>Collect a safe amount of gas money from the end user prior to performing any actions.</li>
<li>'Lazy' relaying, where relaying might only be profitable in certain, potentially rare, market conditions.</li>
</ul>
<p>Generic relayers have an incentive model built in to the network, so you do not need to design an incentive structure when using them.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../dapps/architecture/4_topology.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../technical/env/environments.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../dapps/architecture/4_topology.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../technical/env/environments.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
